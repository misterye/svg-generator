# 📝 模型更新日志

## 当前使用模型

**模型**: `gemini-2.5-flash`  
**更新日期**: 2025-12-13  
**状态**: ✅ 已启用（生产稳定版本）

## 模型历史

### v2.5 (当前) - 2025-12-13
- **模型**: `gemini-2.5-flash`
- **特性**: 
  - 生产就绪的稳定版本（GA since June 2025）
  - 优秀的速度和质量平衡
  - 增强的多语言支持
  - 改进的安全过滤器
  - 1M token 上下文窗口
- **适用场景**: 
  - 生产环境使用
  - 需要稳定性和可靠性
  - 快速响应的 SVG 生成
  - 高质量代码输出

### v3.0 (跳过 - 需要特殊访问权限) - 2025-12-13
- **模型**: `gemini-3-pro-preview`
- **状态**: 可能需要特殊 API 权限或白名单访问
- **备注**: 最新最强，但可能不是所有 API Key 都能访问

### v2.0 (已弃用) - 2025-12-13 之前
- **模型**: `gemini-2.0-flash-exp`
- **特性**:
  - 快速响应
  - 良好的代码生成
  - 1M token 上下文窗口
- **弃用原因**: 升级到更强大的 3.0 版本

## 如何切换模型

如果你需要切换回旧模型或尝试其他模型，编辑 `app/api/generate-svg/route.ts`：

```typescript
// 找到这部分代码
const response = await ai.models.generateContent({
    // Previous model: 'gemini-2.0-flash-exp'
    model: 'gemini-3-pro-preview', // 当前模型
    // ...
});
```

### 可用的模型选项

| 模型名称 | 特点 | 适用场景 | 成本 |
|---------|------|---------|------|
| `gemini-3-pro-preview` | 最强，最新 | 复杂任务，高质量要求 | 高 |
| `gemini-2.5-flash` | 快速，稳定 | 一般任务，生产环境 | 中 |
| `gemini-2.5-flash-lite` | 轻量，低延迟 | 简单任务，移动端 | 低 |
| `gemini-2.0-flash-exp` | 实验性，快速 | 测试，开发 | 低 |

### 切换步骤

1. **编辑 API 路由文件**
   ```bash
   # 打开文件
   code app/api/generate-svg/route.ts
   ```

2. **修改模型名称**
   ```typescript
   model: 'gemini-3-pro-preview', // 改为你想要的模型
   ```

3. **保存并重启**
   
   开发服务器会自动重新加载，或手动重启：
   ```bash
   # Ctrl+C 停止
   npm run dev
   ```

4. **测试**
   
   访问应用并生成一个 SVG 测试新模型

## 模型配置参数

当前使用的配置：

```typescript
config: {
    systemInstruction: systemPrompt,
    temperature: 0.4,    // 较低的温度，输出更确定
    topP: 0.95,          // 核采样参数
    topK: 40,            // 候选词数量限制
}
```

### 参数说明

- **temperature** (0.0 - 2.0)
  - `0.1-0.4`: 更确定、一致（适合代码生成） ← 当前设置
  - `0.7-1.0`: 平衡创造性和准确性
  - `1.2-2.0`: 更有创造性（可能不稳定）

- **topP** (0.0 - 1.0)
  - 控制候选词的累积概率阈值
  - `0.95` 是常用值，保持多样性

- **topK** (1 - 无穷)
  - 限制每步考虑的词汇数量
  - `40` 提供适度的选择范围

### 如何调整参数

如果生成的 SVG 质量不理想，可以尝试：

**更精确的输出（推荐用于代码）**：
```typescript
temperature: 0.2,
topP: 0.9,
topK: 20,
```

**更有创意的设计**：
```typescript
temperature: 0.8,
topP: 0.95,
topK: 60,
```

**最保守（最稳定）**：
```typescript
temperature: 0.1,
topP: 0.85,
topK: 10,
```

## 性能对比

基于实际使用体验：

| 指标 | gemini-3-pro-preview | gemini-2.0-flash-exp |
|------|---------------------|---------------------|
| 响应速度 | 中等 (3-8秒) | 快 (2-5秒) |
| SVG 质量 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 细节处理 | 优秀 | 良好 |
| 稳定性 | 高 | 中 |
| 复杂图形 | 优秀 | 良好 |

## 版本检查

验证当前使用的模型：

1. **查看代码**
   ```bash
   # 查看 API 路由中的模型配置
   type app\api\generate-svg\route.ts | findstr "model:"
   ```

2. **查看生成的 SVG**
   - 在应用界面底部会显示 "Generated by Gemini 3 Pro"

3. **查看日志**
   - 在终端运行 `npm run dev` 时，生成请求会显示日志

## 故障排除

### 问题：模型不可用

**错误信息**: "Model not found" 或 "Invalid model"

**解决方案**:
1. 检查模型名称拼写
2. 确认 API Key 有权限访问该模型
3. 尝试使用稳定版本（如 `gemini-2.5-flash`）

### 问题：响应太慢

**解决方案**:
1. 切换到 Flash 系列模型（更快）
2. 降低 temperature 值
3. 检查网络连接

### 问题：生成质量下降

**解决方案**:
1. 使用 Pro 系列模型
2. 提高 temperature 值
3. 优化 system prompt
4. 使用更详细的用户提示词

## 未来计划

- [ ] 添加模型选择器（UI 中让用户选择）
- [ ] 实现多模型对比功能
- [ ] 添加自定义参数配置界面
- [ ] 集成模型性能监控

## 资源链接

- [Google AI Studio](https://aistudio.google.com)
- [Gemini API 文档](https://ai.google.dev/docs)
- [模型版本更新](https://ai.google.dev/gemini-api/docs/models)
- [价格信息](https://ai.google.dev/pricing)

---

**最后更新**: 2025-12-13  
**维护者**: SVG Generator Team
